"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[535],{7267:function(s,e,a){a.d(e,{Z:function(){return d},S:function(){return p}});var n=a(3396),t=a(7139);const o={class:"toast"};function r(s,e,a,r,i,l){return(0,n.wg)(),(0,n.iD)("div",o,(0,t.zw)(a.message),1)}var i=a(4870),l={props:["message"]};const p=()=>{const s=(0,i.qj)({show:!1,toastMessage:""}),e=e=>{s.show=!0,s.toastMessage=e,setTimeout((()=>{s.show=!1,s.toastMessage=""}),2e3)},{show:a,toastMessage:n}=(0,i.BK)(s);return{show:a,toastMessage:n,showToast:e}};var c=a(89);const u=(0,c.Z)(l,[["render",r],["__scopeId","data-v-affc00d8"]]);var d=u},3681:function(s,e,a){a.r(e),a.d(e,{default:function(){return k}});var n=a(3396),t=a(9242);const o=s=>((0,n.dD)("data-v-45f7955a"),s=s(),(0,n.Cn)(),s),r={class:"wrapper"},i=o((()=>(0,n._)("img",{class:"wrapper__img",src:"http://www.dell-lee.com/imgs/vue3/user.png"},null,-1))),l={class:"wrapper__input"},p={class:"wrapper__input"};function c(s,e,a,o,c,u){const d=(0,n.up)("Toast");return(0,n.wg)(),(0,n.iD)("div",r,[i,(0,n._)("div",l,[(0,n.wy)((0,n._)("input",{class:"wrapper__input__content",placeholder:"用户名","onUpdate:modelValue":e[0]||(e[0]=s=>o.username=s)},null,512),[[t.nr,o.username]])]),(0,n._)("div",p,[(0,n.wy)((0,n._)("input",{type:"password",class:"wrapper__input__content",placeholder:"请输入密码","onUpdate:modelValue":e[1]||(e[1]=s=>o.password=s),autocomplete:"new-password"},null,512),[[t.nr,o.password]])]),(0,n._)("div",{class:"wrapper__login-button",onClick:e[2]||(e[2]=(...s)=>o.handleLogin&&o.handleLogin(...s))},"登陆"),(0,n._)("div",{class:"wrapper__login-link",onClick:e[3]||(e[3]=(...s)=>o.handleRegisterClick&&o.handleRegisterClick(...s))},"立即注册"),o.show?((0,n.wg)(),(0,n.j4)(d,{key:0,message:o.toastMessage},null,8,["message"])):(0,n.kq)("",!0)])}var u=a(2483),d=a(4471),w=a(4870),g=a(7267);const h=s=>{const e=(0,u.tv)(),a=(0,w.qj)({username:"",password:""}),n=async()=>{try{const n=await(0,d.v)("/api/user/login",{username:a.username,password:a.password});0===n?.errno?(localStorage.isLogin=!0,e.push({name:"Home"})):s("登陆失败")}catch(n){s("请求失败")}},{username:t,password:o}=(0,w.BK)(a);return{username:t,password:o,handleLogin:n}},_=()=>{const s=(0,u.tv)(),e=()=>{s.push({name:"Register"})};return{handleRegisterClick:e}};var m={name:"Login",components:{Toast:g.Z},setup(){const{show:s,toastMessage:e,showToast:a}=(0,g.S)(),{username:n,password:t,handleLogin:o}=h(a),{handleRegisterClick:r}=_();return{username:n,password:t,show:s,toastMessage:e,handleLogin:o,handleRegisterClick:r}}},v=a(89);const f=(0,v.Z)(m,[["render",c],["__scopeId","data-v-45f7955a"]]);var k=f}}]);
//# sourceMappingURL=login.9593f8ed.js.map