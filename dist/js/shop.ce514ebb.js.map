{"version":3,"file":"js/shop.ce514ebb.js","mappings":"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","sources":["webpack://jingdong/./src/effects/cartEffects.js","webpack://jingdong/./src/components/ShopInfo.vue","webpack://jingdong/./src/components/ShopInfo.vue?3071","webpack://jingdong/./src/views/shop/Shop.vue","webpack://jingdong/./src/views/shop/Content.vue","webpack://jingdong/./src/views/shop/Content.vue?312f","webpack://jingdong/./src/views/shop/Cart.vue","webpack://jingdong/./src/views/shop/Cart.vue?ac4d","webpack://jingdong/./src/views/shop/Shop.vue?d874"],"sourcesContent":["import { useStore } from 'vuex'\r\nimport { computed } from 'vue'\r\n\r\n// 购物车相关逻辑\r\nexport const useCommonCartEffect = (shopId) => {\r\n  const store = useStore()\r\n  const cartList = store.state.cartList;\r\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\r\n    store.commit('changeCartItemInfo', {\r\n      shopId, productId, productInfo, num\r\n    })\r\n  }\r\n  const productList = computed(() => {\r\n    const productList = cartList[shopId]?.productList || {}\r\n    const notEmptyProductList = {}\r\n    for(let i in productList) {\r\n      const product = productList[i]\r\n      if (product.count > 0){\r\n        notEmptyProductList[i] = product\r\n      }\r\n    }\r\n    return notEmptyProductList\r\n  })\r\n\r\n  const shopName = computed(() => {\r\n    const shopName = cartList[shopId]?.shopName || ''\r\n    return shopName\r\n  })\r\n\r\n  const calculations = computed(() => {\r\n    const productList = cartList[shopId]?.productList\r\n    const result = { total: 0, price: 0, allChecked: true}\r\n    if(productList) {\r\n       for(let i in productList) {\r\n         const product = productList[i]\r\n         result.total += product.count\r\n         if(product.check) {\r\n           result.price += (product.count * product.price)\r\n         }\r\n         if(product.count > 0 && !product.check) {\r\n           result.allChecked = false\r\n         }\r\n      }\r\n    }\r\n    result.price = result.price.toFixed(2)\r\n    return result\r\n  })\r\n\r\n  return {\r\n    cartList, changeCartItemInfo,\r\n    productList, shopName,calculations\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"shop\">\r\n    <img :src=\"item.imgUrl\" class=\"shop__img\">\r\n    <div :class=\"{'shop__content': true, 'shop__content--bordered':hideBorder ? false : true}\">\r\n      <div class=\"shop__content__title\">{{item.name}}</div>\r\n      <div class=\"shop__content-tags\">\r\n        <span class=\"shop__content__tag\">月售：{{item.sales}}</span>\r\n        <span class=\"shop__content__tag\">起送：{{item.expressLimit}}</span>\r\n        <span class=\"shop__content__tag\">基础运费：{{item.expressPrice}}</span>\r\n      </div>\r\n      <p class=\"shop__content__highlight\">{{item.slogan}}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script >\r\n  export default {\r\n    name:'ShopInfo',\r\n    props: ['item','hideBorder' ]\r\n  }\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  @import '../style/variables.scss';\r\n  .shop{\r\n    display: flex;\r\n    padding-top:.12rem 0;\r\n    &__img{\r\n      margin-right:.16rem;\r\n      width:.56rem;\r\n      height: .56rem;\r\n    }\r\n    &__content{\r\n      flex:1;\r\n      padding-bottom:.12rem;\r\n      &--borderd {\r\n        border-bottom:.01rem solid $content-bgColor;\r\n      }\r\n      &__title{\r\n        line-height:.22rem;\r\n        font-size:.16rem;\r\n        color:$content-fontcolor;\r\n      }\r\n      &__tags{\r\n        margin-top:.08rem;\r\n        line-height: .18rem;\r\n        font-size: .13rem;\r\n        color:$content-fontcolor;\r\n      }\r\n      &__tag{\r\n        margin-right: .16rem;\r\n      }\r\n      &__highlight{\r\n        margin:.08rem 0 0 0;\r\n        line-height: .18rem;\r\n        font-size: .13rem;\r\n        color:#E93B3B;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n\r\n","import { render } from \"./ShopInfo.vue?vue&type=template&id=6bf7fc66&scoped=true\"\nimport script from \"./ShopInfo.vue?vue&type=script&lang=js\"\nexport * from \"./ShopInfo.vue?vue&type=script&lang=js\"\n\nimport \"./ShopInfo.vue?vue&type=style&index=0&id=6bf7fc66&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\17436\\\\Desktop\\\\jingdong\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6bf7fc66\"]])\n\nexport default __exports__","<template>\r\n<div class=\"wrapper\">\r\n  <div class=\"search\">\r\n    <div\r\n    class=\"search__back iconfont\"\r\n    @click=\"handleBackClick\"\r\n    >&#xe8a4;\r\n    </div>\r\n    <div class=\"search__content\">\r\n       <span class=\"search__content__icon iconfont\">&#xe62f;</span>\r\n       <input class=\"search__content__input\"\r\n          placeholder=\"请输入商品名称\" />\r\n    </div>\r\n  </div>\r\n    <ShopInfo :item=\"item\"  :hideBorder=\"true\" v-show=\"item.imgUrl\" />\r\n    <Content :shopName=\"item.name\"/>\r\n    <Cart />\r\n</div>\r\n</template>\r\n\r\n<script >\r\nimport { reactive, toRefs } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { get } from '../../utils/request'\r\nimport ShopInfo from '../../components/ShopInfo'\r\nimport Content from './Content'\r\nimport Cart from './Cart'\r\n\r\n//获取当前商铺信息\r\nconst useShopInfoEffect = () => {\r\n  const route= useRoute()\r\n  const data = reactive({ item :{} })\r\n  const getItemData = async () => {\r\n    const result = await get(`/api/shop/${route.params.id}`)\r\n    if(result?.errno === 0 && result?.data){\r\n      data.item = result.data\r\n    }\r\n  }\r\n const { item } = toRefs(data)\r\n return { item ,getItemData  }\r\n}\r\n\r\n//点击回退逻辑\r\nconst useBackRouterEffect = () => {\r\n  const router = useRouter()\r\n   const handleBackClick = () => {\r\n      router.back()\r\n    }\r\n    return handleBackClick\r\n}\r\n\r\n\r\n\r\nexport default {\r\n  name:'Shop',\r\n  components: { ShopInfo, Content, Cart},\r\n  setup() {\r\n    const{ item , getItemData } = useShopInfoEffect()\r\n    const handleBackClick = useBackRouterEffect()\r\n    getItemData()\r\n    return { item, handleBackClick }\r\n  }\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/variables.scss';\r\n.wrapper{\r\n  padding:0 .18rem;\r\n}\r\n\r\n.search{\r\n  display:flex;\r\n  margin:.14rem 0 .16rem 0;\r\n  line-height: .32rem;\r\n  &__back{\r\n    width:.3rem;\r\n    font-size:.24rem;\r\n    color:#B6B6B6;\r\n  }\r\n  &__content {\r\n    display:flex;\r\n    flex:1;\r\n    line-height:.32rem;\r\n    background:$search-bgColor;\r\n    border-radius: .16rem;\r\n    &__icon{\r\n      width:.44rem;\r\n      text-align: center;\r\n      color:$search-fontColor;\r\n    }\r\n    &__input{\r\n      display: block;\r\n      width: 100%;\r\n      padding-right: .2rem;\r\n      border: none;\r\n      outline: none;\r\n      background: none;\r\n      height: .31rem;\r\n      font-size: .14rem;\r\n      color: $content-fontcolor;\r\n      &::placeholder {\r\n        color: $content-fontcolor;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</style>\r\n\r\n","<template>\r\n <div class=\"content\">\r\n  <div class=\"category\">\r\n    <div\r\n      :class=\"{'category__item': true, 'category__item--active': currentTab === item.tab}\"\r\n      v-for=\"item in categories\"\r\n      :key=\"item.name\"\r\n      @click =\"handleTabClick(item.tab)\"\r\n      >\r\n        {{item.name}}\r\n      </div>\r\n  </div>\r\n  <div class=\"product\">\r\n    <div\r\n    class=\"product__item\"\r\n    v-for=\"item in list\"\r\n    :key=\"item._id\"\r\n    >\r\n      <img class=\"product__item__img\" :src=\"item.imgUrl\" />\r\n      <div class=\"product__item__detail\">\r\n        <h4 class=\"product__item__title\">{{item.name}}</h4>\r\n        <p class=\"product__item__sales\">月售{{item.sales}}件</p>\r\n        <p class=\"product__item__price\">\r\n          <span class=\"product__item__yen\">&yen;</span>{{item.price}}\r\n          <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\r\n        </p>\r\n      </div>\r\n      <div class=\"product__number\">\r\n        <span\r\n         class=\"product__number__minus iconfont\"\r\n         @click=\"() => { changeCartItem(shopId, item._id, item,-1, shopName)}\"\r\n         >&#xe780;</span>\r\n        {{getProductCartCount( shopId, item._id )}}\r\n        <span\r\n          class=\"product__number__plus iconfont\"\r\n          @click=\"() => { changeCartItem(shopId, item._id, item,1, shopName )}\"\r\n          >&#xe620;</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs,ref, watchEffect } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { get } from '../../utils/request'\r\nimport { useCommonCartEffect } from '../../effects/cartEffects'\r\nimport { useStore } from 'vuex'\r\n\r\nconst categories =[\r\n  { name:'全部商品', tab:'all'},\r\n  { name:'秒杀', tab:'seckill'},\r\n  { name:'新鲜水果', tab:'fruit'}\r\n]\r\n\r\n\r\n//tab相关的逻辑\r\nconst useTabEffect = () => {\r\n  const currentTab = ref(categories[0].tab)\r\n  const handleTabClick = (tab) => {\r\n       currentTab.value = tab\r\n    }\r\n    return { currentTab, handleTabClick }\r\n}\r\n\r\n//列表内容相关的逻辑\r\nconst useCurrentListEffect = (currentTab, shopId) => {\r\n  const content = reactive({list:[]})\r\n  const getContentData = async () => {\r\n    const result = await get(`/api/shop/${shopId}/products`, {\r\n      tab: currentTab.value\r\n    })\r\n    if(result?.errno === 0 && result?.data?.length) {\r\n      content.list= result.data;\r\n    }\r\n  }\r\n\r\n  watchEffect(() => { getContentData() })\r\n\r\n  const { list } = toRefs(content)\r\n  return { list }\r\n}\r\n\r\n//购物车相关逻辑\r\n  const useCartEffect = () => {\r\n    const store = useStore()\r\n    const { cartList, changeCartItemInfo } = useCommonCartEffect()\r\n    const changeShopName = (shopId,shopName) => {\r\n       store.commit('changeShopName',{ shopId,shopName })\r\n    }\r\n    const  changeCartItem = (shopId, productId , item , num,shopName) => {\r\n      changeCartItemInfo(shopId, productId , item , num )\r\n      changeShopName(shopId, shopName)\r\n    }\r\n    const getProductCartCount = (shopId, productId ) => {\r\n      return cartList?.[shopId]?.productList?.[productId]?.count || 0\r\n    }\r\n    return { cartList, changeCartItem,getProductCartCount}\r\n\r\n  }\r\n\r\n\r\nexport default {\r\n  name: 'Content',\r\n  props:['shopName'],\r\n  setup() {\r\n    const route = useRoute()\r\n    const shopId = route.params.id\r\n    const { currentTab, handleTabClick } = useTabEffect()\r\n    const { list } = useCurrentListEffect(currentTab,shopId)\r\n    const { changeCartItem, cartList,getProductCartCount } = useCartEffect()\r\n    return {\r\n      categories, currentTab,\r\n      handleTabClick,list,\r\n      cartList,shopId, changeCartItem,\r\n      getProductCartCount\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/variables.scss';\r\n@import '../../style/mixins.scss';\r\n\r\n.content {\r\n  display: flex;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 1.5rem;\r\n  bottom: .5rem;\r\n}\r\n.category {\r\n  overflow-y: scroll;\r\n  height: 100%;\r\n  width: .76rem;\r\n  background:$search-bgColor;\r\n  &__item {\r\n    line-height: .4rem;\r\n    text-align: center;\r\n    font-size: .14rem;\r\n    color: $content-fontcolor;\r\n    &--active {\r\n      background:$bgColor;\r\n    }\r\n  }\r\n}\r\n.product {\r\n  overflow-y: scroll;\r\n  flex: 1;\r\n  &__item {\r\n    position:relative;\r\n    display: flex;\r\n    padding: .12rem 0;\r\n    margin: 0 .16rem;\r\n    border-bottom: .01rem solid $content-bgColor;\r\n    &__detai{\r\n      overflow:hidden;\r\n    }\r\n    &__img {\r\n      width: .68rem;\r\n      height: .68rem;\r\n      margin-right: .16rem;\r\n    }\r\n    &__title {\r\n      margin: 0;\r\n      line-height: .2rem;\r\n      font-size: .14rem;\r\n      color: $content-fontcolor;\r\n      @include ellipsis;\r\n    }\r\n    &__sales {\r\n      margin: .06rem 0;\r\n      font-size: .12rem;\r\n      color: $content-fontcolor;\r\n    }\r\n    &__price {\r\n      margin: 0;\r\n      line-height: .2rem;\r\n      font-size: .14rem;\r\n      color: $hightlight-fontColor;\r\n    }\r\n    &__yen {\r\n      font-size: .12rem;\r\n    }\r\n    &__origin {\r\n      margin-left: .06rem;\r\n      line-height: .2rem;\r\n      font-size: .12rem;\r\n      color: $light-fontColor;\r\n      text-decoration: line-through;\r\n    }\r\n    .product__number{\r\n      position:absolute;\r\n      right:0;\r\n      bottom:.12rem;\r\n      line-height: .18rem;\r\n      &__minus {\r\n        position:relative;\r\n        top:.02rem;\r\n        color: $medium-fontColor;\r\n        margin-right: .05rem;\r\n      }\r\n      &__plus {\r\n        position:relative;\r\n        top:.02rem;\r\n        color: $btn-bgColor;\r\n        margin-left: .05rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\r\n</style>\r\n","import { render } from \"./Content.vue?vue&type=template&id=282a6b3a&scoped=true\"\nimport script from \"./Content.vue?vue&type=script&lang=js\"\nexport * from \"./Content.vue?vue&type=script&lang=js\"\n\nimport \"./Content.vue?vue&type=style&index=0&id=282a6b3a&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\17436\\\\Desktop\\\\jingdong\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-282a6b3a\"]])\n\nexport default __exports__","<template>\r\n  <div\r\n    class=\"mask\"\r\n    v-if=\"showCart && calculations.total > 0\"\r\n    @click=\"handleCartShowChange\"\r\n  />\r\n  <div class=\"cart\">\r\n    <div class=\"product\" v-if=\"showCart && calculations.total > 0\">\r\n      <div class=\"product__header\">\r\n        <div\r\n          class=\"product__header__all\"\r\n          @click=\"() => setCartItemsChecked(shopId)\"\r\n        >\r\n          <span\r\n            class=\"product__header__icon iconfont\"\r\n            v-html=\"calculations.allChecked ? '&#xe626;': '&#xe61a;'\"\r\n          >\r\n          </span>\r\n          全选\r\n        </div>\r\n        <div class=\"product__header__clear\">\r\n          <span class=\"product__header__clear__btn\"\r\n            @click=\"() => cleanCartProducts(shopId)\"\r\n          >清空购物车</span>\r\n        </div>\r\n      </div>\r\n        <div\r\n          class=\"product__item\"\r\n          v-for=\"item in productList\"\r\n          :key=\"item._id\"\r\n          >\r\n          <div\r\n            class=\"product__item__checked iconfont\"\r\n            v-html=\"item.check ? '&#xe626;': '&#xe61a;'\"\r\n            @click=\"() => changeCartItemChecked(shopId, item._id)\"\r\n          />\r\n          <img class=\"product__item__img\" :src=\"item.imgUrl\" />\r\n          <div class=\"product__item__detail\">\r\n            <h4 class=\"product__item__title\">{{item.name}}</h4>\r\n            <p class=\"product__item__price\">\r\n              <span class=\"product__item__yen\">&yen;</span>{{item.price}}\r\n              <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\r\n            </p>\r\n          </div>\r\n          <div class=\"product__number\">\r\n            <span\r\n              class=\"product__number__minus iconfont\"\r\n              @click=\"() => { changeCartItemInfo(shopId, item._id, item, -1) }\"\r\n            >&#xe780;</span>\r\n              {{item.count || 0}}\r\n            <span\r\n              class=\"product__number__plus iconfont\"\r\n              @click=\"() => { changeCartItemInfo(shopId, item._id, item, 1) }\"\r\n            >&#xe620;</span>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"check\">\r\n      <div class=\"check__icon\">\r\n        <img\r\n          src=\"http://www.dell-lee.com/imgs/vue3/basket.png\"\r\n          class=\"check__icon__img\"\r\n          @click=\"handleCartShowChange\"\r\n        />\r\n        <div class=\"check__icon__tag\">{{calculations.total}}</div>\r\n      </div>\r\n      <div class=\"check__info\">\r\n        总计：<span class=\"check__info__price\">&yen; {{calculations.price}}</span>\r\n      </div>\r\n      <div class=\"check__btn\" v-show=\"calculations.total > 0\">\r\n        <router-link :to=\"{path: `/OrderConfirmation/${shopId}`}\">\r\n          去结算\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nimport { useCommonCartEffect } from '../../effects/cartEffects'\r\n\r\n// 获取购物车信息逻辑\r\nconst useCartEffect = (shopId) => {\r\n    const store = useStore()\r\n    const {\r\n       changeCartItemInfo,productList,calculations\r\n    } = useCommonCartEffect(shopId)\r\n\r\n\r\n\r\n    const changeCartItemChecked = (shopId, productId) => {\r\n      store.commit('changeCartItemChecked', {shopId, productId})\r\n    }\r\n\r\n    const cleanCartProducts = (shopId) => {\r\n      store.commit('cleanCartProducts', { shopId })\r\n    }\r\n\r\n    const setCartItemsChecked = (shopId) => {\r\n\r\n      store.commit('setCartItemsChecked', { shopId })\r\n    }\r\n\r\n    return {\r\n      calculations, productList, cleanCartProducts,\r\n      changeCartItemInfo, changeCartItemChecked, setCartItemsChecked,\r\n    }\r\n}\r\n\r\n// 展示隐藏购物车逻辑\r\nconst toggleCartEffect = () => {\r\n  const showCart = ref(false)\r\n  const handleCartShowChange = () => {\r\n    showCart.value = !showCart.value;\r\n  }\r\n  return { showCart, handleCartShowChange }\r\n}\r\n\r\nexport default {\r\n  name: 'Cart',\r\n  setup() {\r\n    const route = useRoute();\r\n    const shopId = route.params.id;\r\n    const {\r\n      calculations, productList, cleanCartProducts,\r\n      changeCartItemInfo, changeCartItemChecked, setCartItemsChecked\r\n    } = useCartEffect(shopId)\r\n    const { showCart, handleCartShowChange } = toggleCartEffect()\r\n    return {\r\n      calculations, shopId, productList, cleanCartProducts,\r\n      changeCartItemInfo, changeCartItemChecked,\r\n      setCartItemsChecked, showCart, handleCartShowChange\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/variables.scss';\r\n@import '../../style/mixins.scss';\r\n.mask {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  top: 0;\r\n  background: rgba(0, 0, 0, .5);\r\n  z-index: 1;\r\n}\r\n.cart {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 2;\r\n  background: $bgColor;\r\n}\r\n.product {\r\n  overflow-y: scroll;\r\n  flex: 1;\r\n  background: $bgColor;\r\n  &__header {\r\n    display: flex;\r\n    line-height: .52rem;\r\n    border-bottom: .01rem solid $content-bgColor;\r\n    font-size: .14rem;\r\n    color: $content-fontcolor;\r\n    &__all {\r\n      width: .64rem;\r\n      margin-left: .18rem;\r\n    }\r\n    &__icon {\r\n      display: inline-block;\r\n      margin-right: .1rem;\r\n      vertical-align: top;\r\n      color: $btn-bgColor;\r\n      font-size: .2rem;\r\n    }\r\n    &__clear {\r\n      flex: 1;\r\n      margin-right: .16rem;\r\n      text-align: right;\r\n      &__btn {\r\n        display: inline-block;\r\n      }\r\n    }\r\n  }\r\n  &__item {\r\n    position: relative;\r\n    display: flex;\r\n    padding: .12rem 0;\r\n    margin: 0 .16rem;\r\n    border-bottom: .01rem solid $content-bgColor;\r\n    &__checked {\r\n      line-height: .5rem;\r\n      margin-right: .2rem;\r\n      color: $btn-bgColor;\r\n      font-size: .2rem;\r\n    }\r\n    &__detail {\r\n      overflow: hidden;\r\n    }\r\n    &__img {\r\n      width: .46rem;\r\n      height: .46rem;\r\n      margin-right: .16rem;\r\n    }\r\n    &__title {\r\n      margin: 0;\r\n      line-height: .2rem;\r\n      font-size: .14rem;\r\n      color: $content-fontcolor;\r\n      @include ellipsis;\r\n    }\r\n    &__price {\r\n      margin: .06rem 0 0 0;\r\n      line-height: .2rem;\r\n      font-size: .14rem;\r\n      color: $hightlight-fontColor;\r\n    }\r\n    &__yen {\r\n      font-size: .12rem;\r\n    }\r\n    &__origin {\r\n      margin-left: .06rem;\r\n      line-height: .2rem;\r\n      font-size: .12rem;\r\n      color: $light-fontColor;\r\n      text-decoration: line-through;\r\n    }\r\n    .product__number {\r\n      position: absolute;\r\n      right: 0;\r\n      bottom: .26rem;\r\n      &__minus {\r\n        position:relative;\r\n        top:.02rem;\r\n        color: $medium-fontColor;\r\n        margin-right: .05rem;\r\n      }\r\n      &__plus {\r\n        position:relative;\r\n        top:.02rem;\r\n        color: $btn-bgColor;\r\n        margin-left: .05rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n.check {\r\n  display: flex;\r\n  height: .49rem;\r\n  border-top: .01rem solid $content-bgColor;\r\n  line-height: .49rem;\r\n  &__icon {\r\n    position: relative;\r\n    width: .84rem;\r\n    &__img {\r\n      display: block;\r\n      margin: .12rem auto;\r\n      width: .28rem;\r\n      height: .26rem;\r\n    }\r\n    &__tag {\r\n      position: absolute;\r\n      left: .46rem;\r\n      top: .04rem;\r\n      padding: 0 .04rem;\r\n      min-width: .2rem;\r\n      height: .2rem;\r\n      line-height: .2rem;\r\n      background-color: $hightlight-fontColor;\r\n      border-radius: .1rem;\r\n      font-size: .12rem;\r\n      text-align: center;\r\n      color: #fff;\r\n      transform: scale(.5);\r\n      transform-origin: left center;\r\n    }\r\n  }\r\n  &__info {\r\n    flex: 1;\r\n    color: $content-fontcolor;\r\n    font-size: .12rem;\r\n    &__price {\r\n      line-height: .49rem;\r\n      color: $hightlight-fontColor;\r\n      font-size: .18rem;\r\n    }\r\n  }\r\n  &__btn {\r\n    width: .98rem;\r\n    background-color: #4FB0F9;\r\n    text-align: center;\r\n    font-size: .14rem;\r\n    a {\r\n      color: $bgColor;\r\n      text-decoration: none;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Cart.vue?vue&type=template&id=366f047f&scoped=true\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport \"./Cart.vue?vue&type=style&index=0&id=366f047f&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\17436\\\\Desktop\\\\jingdong\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-366f047f\"]])\n\nexport default __exports__","import { render } from \"./Shop.vue?vue&type=template&id=491af189&scoped=true\"\nimport script from \"./Shop.vue?vue&type=script&lang=js\"\nexport * from \"./Shop.vue?vue&type=script&lang=js\"\n\nimport \"./Shop.vue?vue&type=style&index=0&id=491af189&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\17436\\\\Desktop\\\\jingdong\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-491af189\"]])\n\nexport default __exports__"],"names":["useCommonCartEffect","shopId","store","useStore","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","computed","notEmptyProductList","i","product","count","shopName","calculations","result","total","price","allChecked","check","toFixed","class","_createElementBlock","_createElementVNode","src","$props","imgUrl","_toDisplayString","name","sales","expressLimit","expressPrice","slogan","props","__exports__","render","placeholder","onClick","$setup","_hoisted_3","_createVNode","_component_ShopInfo","item","hideBorder","_component_Content","_component_Cart","_Fragment","_renderList","tab","key","_id","_hoisted_10","oldPrice","_hoisted_13","_hoisted_14","categories","useTabEffect","currentTab","ref","handleTabClick","value","useCurrentListEffect","content","reactive","list","getContentData","async","get","errno","data","length","watchEffect","toRefs","useCartEffect","changeShopName","changeCartItem","getProductCartCount","setup","route","useRoute","params","id","innerHTML","_hoisted_12","_hoisted_15","_hoisted_16","_component_router_link","to","path","changeCartItemChecked","cleanCartProducts","setCartItemsChecked","toggleCartEffect","showCart","handleCartShowChange","useShopInfoEffect","getItemData","useBackRouterEffect","router","useRouter","handleBackClick","back","components","ShopInfo","Content","Cart"],"sourceRoot":""}